// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int     @id @default(autoincrement())
  name     String?
  email    String  @unique
  password String?
}

model Patient {
  id       Int     @id @default(autoincrement())
  name     String?
  IC       String @unique
  age      Int
  gender   String?
  email    String  @unique
  contact  String?
  race     String?
  appointment Appointment[]
  cashRevenue CashRevenue[]
}

model Appointment {
  id       Int     @id @default(autoincrement())
  specificpatient Patient @relation(fields: [patientIC], references: [IC]) // Define the foreign key relationship 
  patientIC String    
  reason       String?
  date DateTime @default(now())
  doctor  String @default("null")
  status String @default("waiting")
  arrivalTime DateTime @default(now())
  consultStartTime DateTime @default(now())
  waitingTime DateTime? 
  consultEndTime DateTime @default(now())
  documents String @default("null")
  notes String @default("null")
  medName1 String @default("null")
  quantity1 Int @default(0)
  notes1 String @default("null")
  medName2 String @default("null")
  quantity2 Int @default(0)
  amount Int @default(0)
  notes2 String @default("null")
  followUpReason String @default("null")
  followUpDate DateTime @default(now())
  cashRevenue CashRevenue[]
}

model Medicine {
  id Int @id @default(autoincrement())
  medicine String @unique
  quantity Int
  price Int
}

model CashRevenue {
  id Int @id @default(autoincrement())
  appId Appointment @relation(fields: [appointmentID], references: [id]) // Define the foreign key relationship 
  appointmentID Int
  patic Patient? @relation(fields: [patientIC], references: [IC]) // Define the foreign key relationship 
  patientIC String?
  amount Int
}
	
